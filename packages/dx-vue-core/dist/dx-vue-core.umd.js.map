{"version":3,"file":"dx-vue-core.umd.js","sources":["../src/plugin-based/constants.js","../src/plugin-based/plugin-indexer.js","../src/plugin-based/template-placeholder.js","../src/plugin-based/plugin-host.js","../src/plugin-based/plugin.js","../src/plugin-based/helpers.js","../src/plugin-based/action.js","../src/plugin-based/getter.js","../src/plugin-based/template.js","../src/plugin-based/template-connector.js","../src/sizer.js","../src/ref-holder.js","../src/render-component.js"],"sourcesContent":["export const PLUGIN_HOST_CONTEXT = Symbol('pluginHost');\nexport const POSITION_CONTEXT = Symbol('position');\nexport const TEMPLATE_HOST_CONTEXT = Symbol('templateHost');\n\nexport const RERENDER_TEMPLATE_EVENT = Symbol('rerenderTemplate');\nexport const UPDATE_CONNECTION_EVENT = Symbol('updateConnection');\n","import { POSITION_CONTEXT } from './constants';\n\nconst PluginIndexerContext = {\n  name: 'PluginIndexerContext',\n  props: {\n    position: {\n      type: Function,\n      required: true,\n    },\n  },\n  provide() {\n    return {\n      [POSITION_CONTEXT]: this.position,\n    };\n  },\n  render() {\n    return this.$slots.default && this.$slots.default[0];\n  },\n};\n\nexport const PluginIndexer = {\n  name: 'PluginIndexer',\n  inject: {\n    position: {\n      from: POSITION_CONTEXT,\n      default: undefined,\n    },\n  },\n  render() {\n    const { position } = this;\n\n    return (\n      <div>\n        {\n          this.$slots.default.map((child, index) => {\n            if (!child.componentOptions) return child;\n\n            const childPosition = () => {\n              const calculatedPosition = (position && position()) || [];\n              return [...calculatedPosition, index];\n            };\n\n            return (\n              <PluginIndexerContext position={childPosition}>\n                {child}\n              </PluginIndexerContext>\n            );\n          })\n        }\n      </div>\n    );\n  },\n};\n","import { PLUGIN_HOST_CONTEXT, TEMPLATE_HOST_CONTEXT, RERENDER_TEMPLATE_EVENT } from './constants';\n\nexport const DxTemplatePlaceholder = {\n  name: 'DxTemplatePlaceholder',\n  inheritAttrs: false,\n  props: {\n    name: {\n      type: String,\n    },\n  },\n  provide() {\n    const templateHost = {};\n    Object.defineProperty(templateHost, 'params', {\n      enumerable: true,\n      get: () => this.computedParams,\n    });\n    Object.defineProperty(templateHost, 'templates', {\n      enumerable: true,\n      get: () => this.computedTemplates.slice(1),\n    });\n    return { [TEMPLATE_HOST_CONTEXT]: templateHost };\n  },\n  inject: {\n    pluginHost: { from: PLUGIN_HOST_CONTEXT },\n    templateHost: {\n      from: TEMPLATE_HOST_CONTEXT,\n      default: { templates: [], params: undefined },\n    },\n  },\n  created() {\n    this.subscription = {\n      [RERENDER_TEMPLATE_EVENT]: (id) => {\n        if (this.computedTemplates[0] && this.computedTemplates[0].id === id) {\n          this.$forceUpdate();\n        }\n      },\n    };\n  },\n  beforeMount() {\n    this.pluginHost.registerSubscription(this.subscription);\n  },\n  computed: {\n    computedParams() {\n      const that = this;\n      return !Object.keys(this.$attrs).length && !Object.keys(this.$listeners).length\n        ? this.templateHost.params\n        : {\n          get attrs() { return that.$attrs; },\n          get listeners() { return that.$listeners; },\n          get slots() { return that.$slots; },\n          get scopedSlots() { return that.$scopedSlots; },\n        };\n    },\n    computedTemplates() {\n      return this.name\n        ? this.pluginHost.collect(`${this.name}Template`)\n          .filter(template => template.predicate(this.computedParams))\n          .reverse()\n        : this.templateHost.templates;\n    },\n  },\n  render() {\n    const template = this.computedTemplates[0];\n\n    let content = template ? template.children() : null;\n    if (content && typeof content === 'function') {\n      content = content(this.computedParams);\n    }\n    if (this.$scopedSlots.default) {\n      content = this.$scopedSlots.default(content);\n    }\n    return content && content.length ? content[0] : content;\n  },\n  destroyed() {\n    this.pluginHost.unregisterSubscription(this.subscription);\n  },\n};\n","import { PluginHost as PluginHostCore } from '@devexpress/dx-core';\nimport { PluginIndexer } from './plugin-indexer';\nimport { DxTemplatePlaceholder } from './template-placeholder';\nimport { PLUGIN_HOST_CONTEXT } from './constants';\n\nexport const DxPluginHost = {\n  name: 'DxPluginHost',\n  beforeCreate() {\n    this.pluginHost = new PluginHostCore();\n  },\n  provide() {\n    return {\n      [PLUGIN_HOST_CONTEXT]: this.pluginHost,\n    };\n  },\n  render() {\n    return (\n      <div>\n        <PluginIndexer>\n          {this.$slots.default}\n        </PluginIndexer>\n        <DxTemplatePlaceholder name=\"root\" />\n      </div>\n    );\n  },\n};\n","import { PluginIndexer } from './plugin-indexer';\nimport { PLUGIN_HOST_CONTEXT, POSITION_CONTEXT } from './constants';\n\nexport const DxPlugin = {\n  name: 'DxPlugin',\n  props: {\n    name: {\n      type: String,\n      default: '',\n    },\n    dependencies: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  inject: {\n    pluginHost: { from: PLUGIN_HOST_CONTEXT },\n    position: { from: POSITION_CONTEXT },\n  },\n  beforeMount() {\n    const {\n      pluginHost, position, name, dependencies,\n    } = this;\n\n    this.plugin = {\n      position,\n      name,\n      dependencies,\n      container: true,\n    };\n    pluginHost.registerPlugin(this.plugin);\n  },\n  beforeUpdate() {\n    this.pluginHost.ensureDependencies();\n  },\n  beforeDestroy() {\n    this.pluginHost.unregisterPlugin(this.plugin);\n  },\n  render() {\n    return (\n      <PluginIndexer>\n        {this.$slots.default}\n      </PluginIndexer>\n    );\n  },\n};\n","import { shallowEqual } from '@devexpress/dx-core';\n\nexport const getAvailableGetters = (\n  pluginHost,\n  getGetterValue = getterName => pluginHost.get(`${getterName}Getter`),\n) => {\n  const trackedDependencies = {};\n\n  let getters;\n  if (typeof Proxy !== 'undefined') {\n    getters = new Proxy({}, {\n      get(target, prop) {\n        if (typeof prop !== 'string') return undefined;\n        const boxedGetter = getGetterValue(prop);\n        trackedDependencies[prop] = boxedGetter && boxedGetter.id;\n        return boxedGetter && boxedGetter.value;\n      },\n      getOwnPropertyDescriptor(target, prop) {\n        return { configurable: true, enumerable: true, value: this.get(target, prop) };\n      },\n      ownKeys() {\n        return pluginHost.knownKeys('Getter');\n      },\n    });\n  } else {\n    getters = pluginHost.knownKeys('Getter')\n      .reduce((acc, getterName) => {\n        Object.defineProperty(acc, getterName, {\n          get: () => {\n            const boxedGetter = getGetterValue(getterName);\n            trackedDependencies[getterName] = boxedGetter && boxedGetter.id;\n            return boxedGetter && boxedGetter.value;\n          },\n        });\n        return acc;\n      }, {});\n  }\n\n  return { getters, trackedDependencies };\n};\n\nexport const isTrackedDependenciesChanged = (\n  pluginHost,\n  prevTrackedDependencies,\n  getGetterValue = getterName => pluginHost.get(`${getterName}Getter`),\n) => {\n  const trackedDependencies = Object.keys(prevTrackedDependencies)\n    .reduce((acc, getterName) => {\n      const boxedGetter = getGetterValue(getterName);\n      return Object.assign(acc, {\n        [getterName]: boxedGetter && boxedGetter.id,\n      });\n    }, {});\n  return !shallowEqual(prevTrackedDependencies, trackedDependencies);\n};\n\nexport const getAvailableActions = (\n  pluginHost,\n  getAction = actionName => pluginHost.collect(`${actionName}Action`).slice().reverse()[0],\n) => {\n  let actions;\n  if (typeof Proxy !== 'undefined') {\n    actions = new Proxy({}, {\n      get(target, prop) {\n        if (typeof prop !== 'string') return undefined;\n        return getAction(prop);\n      },\n      getOwnPropertyDescriptor(target, prop) {\n        return { configurable: true, enumerable: true, value: this.get(target, prop) };\n      },\n      ownKeys() {\n        return pluginHost.knownKeys('Action');\n      },\n    });\n  } else {\n    actions = pluginHost.knownKeys('Action')\n      .reduce((acc, actionName) => {\n        Object.defineProperty(acc, actionName, {\n          get: () => getAction(actionName),\n        });\n        return acc;\n      }, {});\n  }\n  return actions;\n};\n","import {\n  getAvailableGetters,\n  getAvailableActions,\n} from './helpers';\nimport { PLUGIN_HOST_CONTEXT, POSITION_CONTEXT } from './constants';\n\nexport const DxAction = {\n  name: 'DxAction',\n  props: {\n    name: {\n      type: String,\n      required: true,\n    },\n    action: {\n      type: Function,\n      required: true,\n    },\n  },\n  inject: {\n    pluginHost: { from: PLUGIN_HOST_CONTEXT },\n    position: { from: POSITION_CONTEXT },\n  },\n  beforeMount() {\n    const { pluginHost, name } = this;\n\n    this.plugin = {\n      position: () => this.position(),\n      [`${name}Action`]: (params) => {\n        const { action } = this;\n        const { getters } = getAvailableGetters(\n          pluginHost,\n          getterName => pluginHost.get(`${getterName}Getter`, this.plugin),\n        );\n        let nextParams = params;\n        const actions = getAvailableActions(\n          pluginHost,\n          actionName => (actionName === name\n            ? (newParams) => { nextParams = newParams; }\n            : pluginHost.collect(`${actionName}Action`, this.plugin).slice().reverse()[0]),\n        );\n        action(params, getters, actions);\n        const nextAction = pluginHost.collect(`${name}Action`, this.plugin).slice().reverse()[0];\n        if (nextAction) {\n          nextAction(nextParams);\n        }\n      },\n    };\n\n    pluginHost.registerPlugin(this.plugin);\n  },\n  beforeDestroy() {\n    this.pluginHost.unregisterPlugin(this.plugin);\n  },\n  render() {\n    return null;\n  },\n};\n","import {\n  getAvailableGetters,\n  isTrackedDependenciesChanged,\n  getAvailableActions,\n} from './helpers';\nimport { PLUGIN_HOST_CONTEXT, POSITION_CONTEXT, UPDATE_CONNECTION_EVENT } from './constants';\n\nconst GLOBAL_SHIFT = 0xffff;\n\nlet globalGetterId = 0;\nexport const DxGetter = {\n  name: 'DxGetter',\n  props: {\n    name: {\n      type: String,\n      required: true,\n    },\n    value: null,\n    computed: {\n      type: Function,\n      default: undefined,\n    },\n  },\n  inject: {\n    pluginHost: { from: PLUGIN_HOST_CONTEXT },\n    position: { from: POSITION_CONTEXT },\n  },\n  created() {\n    this.globalId = globalGetterId;\n    globalGetterId += 1;\n    this.internalId = 0;\n    this.generateId();\n  },\n  beforeMount() {\n    const { pluginHost, name } = this;\n\n    let lastComputed;\n    let lastTrackedDependencies = {};\n    let lastResult;\n    let unwatch;\n\n    this.plugin = {\n      position: () => this.position(),\n      [`${name}Getter`]: (original) => {\n        const { value, computed } = this;\n        if (computed === undefined) return { id: this.id, value };\n\n        const getGetterValue = getterName => ((getterName === name)\n          ? original\n          : pluginHost.get(`${getterName}Getter`, this.plugin));\n\n        if (computed === lastComputed\n          && !isTrackedDependenciesChanged(pluginHost, lastTrackedDependencies, getGetterValue)) {\n          return { id: this.id, value: lastResult };\n        }\n\n        const { getters, trackedDependencies } = getAvailableGetters(pluginHost, getGetterValue);\n        const actions = getAvailableActions(pluginHost);\n\n        lastComputed = computed;\n        lastTrackedDependencies = trackedDependencies;\n        if (unwatch) unwatch();\n        unwatch = this.$watch(\n          () => computed(getters, actions),\n          (newValue) => {\n            this.generateId();\n            lastResult = newValue;\n          },\n          { immediate: true },\n        );\n        return { id: this.id, value: lastResult };\n      },\n    };\n\n    pluginHost.registerPlugin(this.plugin);\n  },\n  beforeDestroy() {\n    this.pluginHost.unregisterPlugin(this.plugin);\n  },\n  render() {\n    return null;\n  },\n  methods: {\n    generateId() {\n      this.internalId = this.internalId + 1 < GLOBAL_SHIFT ? this.internalId + 1 : 0;\n      // eslint-disable-next-line no-bitwise\n      this.id = (this.globalId << GLOBAL_SHIFT) + this.internalId;\n    },\n  },\n  watch: {\n    value() {\n      this.generateId();\n      this.pluginHost.broadcast(UPDATE_CONNECTION_EVENT);\n    },\n  },\n};\n","import { PLUGIN_HOST_CONTEXT, POSITION_CONTEXT, RERENDER_TEMPLATE_EVENT } from './constants';\n\nlet globalTemplateId = 0;\nexport const DxTemplate = {\n  name: 'DxTemplate',\n  props: {\n    name: {\n      type: String,\n      required: true,\n    },\n    predicate: {\n      type: Function,\n    },\n  },\n  beforeCreate() {\n    globalTemplateId += 1;\n    this.id = globalTemplateId;\n  },\n  inject: {\n    pluginHost: { from: PLUGIN_HOST_CONTEXT },\n    position: { from: POSITION_CONTEXT },\n  },\n  created() {\n    this.plugin = {\n      position: () => this.position(),\n      [`${this.name}Template`]: {\n        id: this.id,\n        predicate: params => (this.predicate ? this.predicate(params) : true),\n        children: () => this.$scopedSlots.default || this.$slots.default,\n      },\n    };\n  },\n  beforeMount() {\n    this.pluginHost.registerPlugin(this.plugin);\n  },\n  render() {\n    return null;\n  },\n  updated() {\n    this.pluginHost.broadcast(RERENDER_TEMPLATE_EVENT, this.id);\n  },\n  destroyed() {\n    this.pluginHost.unregisterPlugin(this.plugin);\n  },\n};\n","import {\n  getAvailableGetters,\n  getAvailableActions,\n  isTrackedDependenciesChanged,\n} from './helpers';\nimport { PLUGIN_HOST_CONTEXT, UPDATE_CONNECTION_EVENT } from './constants';\n\nexport const DxTemplateConnector = {\n  name: 'DxTemplateConnector',\n  inject: {\n    pluginHost: { from: PLUGIN_HOST_CONTEXT },\n  },\n  beforeMount() {\n    this.trackedDependencies = {};\n    this.subscription = {\n      [UPDATE_CONNECTION_EVENT]: () => this.updateConnection(),\n    };\n    this.pluginHost.registerSubscription(this.subscription);\n  },\n  beforeDestroy() {\n    this.pluginHost.unregisterSubscription(this.subscription);\n  },\n  methods: {\n    updateConnection() {\n      if (isTrackedDependenciesChanged(this.pluginHost, this.trackedDependencies)) {\n        this.$forceUpdate();\n      }\n    },\n  },\n  render() {\n    const { getters, trackedDependencies } = getAvailableGetters(this.pluginHost);\n    this.trackedDependencies = trackedDependencies;\n    const actions = getAvailableActions(this.pluginHost);\n\n    return this.$scopedSlots.default({ getters, actions });\n  },\n};\n","const styles = {\n  root: {\n    position: 'relative',\n  },\n  triggers: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'hidden',\n    zIndex: -1,\n    visibility: 'hidden',\n    opacity: 0,\n  },\n  expand: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'auto',\n  },\n  contract: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    height: '100%',\n    width: '100%',\n    overflow: 'auto',\n  },\n  contractTrigger: {\n    position: 'absolute',\n    top: 0,\n    left: 0,\n    width: '200%',\n    height: '200%',\n  },\n};\n\nexport const DxSizer = {\n  name: 'DxSizer',\n  inheritAttrs: false,\n  data() {\n    return {\n      width: 0,\n      height: 0,\n    };\n  },\n  mounted() {\n    this.setupListeners();\n  },\n  methods: {\n    setupListeners() {\n      const size = { height: this.$refs.root.offsetHeight, width: this.$refs.root.offsetWidth };\n\n      this.$refs.contract.scrollTop = size.height;\n      this.$refs.contract.scrollLeft = size.width;\n\n      this.$refs.expandTrigger.style.width = `${size.width + 1}px`;\n      this.$refs.expandTrigger.style.height = `${size.height + 1}px`;\n      this.$refs.expand.scrollTop = 1;\n      this.$refs.expand.scrollLeft = 1;\n\n\n      if (this.width === size.width && this.height === size.height) return;\n\n      this.width = size.width;\n      this.height = size.height;\n    },\n  },\n  render() {\n    const { width, height } = this;\n    return (\n      <div\n        ref=\"root\"\n        style={styles.root}\n      >\n        {width && height && this.$scopedSlots.default({ width, height })}\n        <div style={styles.triggers}>\n          <div\n            ref=\"expand\"\n            style={styles.expand}\n            onScroll={this.setupListeners}\n          >\n            <div\n              ref=\"expandTrigger\"\n            />\n          </div>\n          <div\n            ref=\"contract\"\n            style={styles.contract}\n            onScroll={this.setupListeners}\n          >\n            <div\n              style={styles.contractTrigger}\n            />\n          </div>\n        </div>\n      </div>\n    );\n  },\n};\n","export const DxRefHolder = {\n  name: 'DxRefHolder',\n  inheritAttrs: false,\n  render() {\n    return this.$slots.default[0];\n  },\n};\n","export const createRenderComponent = (Component, initialAdditionalProps) => {\n  let storedAdditionalProps = initialAdditionalProps;\n  const components = new Set();\n\n  const RenderComponent = {\n    name: 'RenderComponent',\n    inheritAttrs: false,\n    beforeMount() {\n      components.add(this);\n    },\n    beforeDestroy() {\n      components.delete(this);\n    },\n    render() {\n      return (\n        <Component\n          {...{ attrs: { ...this.$attrs, ...storedAdditionalProps }, on: { ...this.$listeners } }}\n        />\n      );\n    },\n  };\n\n  return {\n    component: RenderComponent,\n    update: (additionalProps) => {\n      storedAdditionalProps = additionalProps;\n      Array.from(components.values())\n        .forEach(component => component.$forceUpdate());\n    },\n  };\n};\n"],"names":["PLUGIN_HOST_CONTEXT","Symbol","POSITION_CONTEXT","TEMPLATE_HOST_CONTEXT","RERENDER_TEMPLATE_EVENT","UPDATE_CONNECTION_EVENT","PluginIndexerContext","Function","position","$slots","default","PluginIndexer","undefined","map","child","index","componentOptions","childPosition","calculatedPosition","DxTemplatePlaceholder","String","templateHost","defineProperty","computedParams","computedTemplates","slice","from","templates","params","subscription","id","$forceUpdate","pluginHost","registerSubscription","that","Object","keys","$attrs","length","$listeners","attrs","listeners","slots","scopedSlots","$scopedSlots","name","collect","filter","template","predicate","reverse","content","children","unregisterSubscription","DxPluginHost","PluginHostCore","DxPlugin","Array","dependencies","plugin","registerPlugin","ensureDependencies","unregisterPlugin","getAvailableGetters","getGetterValue","get","getterName","trackedDependencies","getters","Proxy","target","prop","boxedGetter","value","configurable","enumerable","knownKeys","reduce","acc","isTrackedDependenciesChanged","prevTrackedDependencies","assign","shallowEqual","getAvailableActions","getAction","actionName","actions","DxAction","action","nextParams","newParams","nextAction","GLOBAL_SHIFT","globalGetterId","DxGetter","globalId","internalId","generateId","lastComputed","lastTrackedDependencies","lastResult","unwatch","original","computed","$watch","newValue","immediate","broadcast","globalTemplateId","DxTemplate","DxTemplateConnector","updateConnection","styles","DxSizer","setupListeners","size","height","$refs","root","offsetHeight","width","offsetWidth","contract","scrollTop","scrollLeft","expandTrigger","style","expand","triggers","contractTrigger","DxRefHolder","createRenderComponent","Component","initialAdditionalProps","storedAdditionalProps","components","Set","RenderComponent","add","delete","on","additionalProps","values","forEach","component"],"mappings":"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"}